@media (max-width:950px){
  .container{flex-direction:column;align-items:stretch;padding:12px 0;}
  .compact-panel,.output-panel{max-width:100vw;min-width:0;margin:0 0 18px;}
}

/* Zentrale, einheitliche Spin-Animation */
@-webkit-keyframes spin {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}
@keyframes spin {
  0%   { -webkit-transform: rotate(0deg); transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); }
}

@keyframes toast-in  {from{opacity:0;transform:translateY(20px)}
                       to  {opacity:1;transform:translateY(0)}}

@keyframes toast-out {to  {opacity:0;transform:translateY(20px)}}

/* ======================================================- */
/* ===============  BASIS-LAYOUT & FONTS  =============== */
/* ====================================================== */
body {
  background:#1d2330;
  font-family:'Inter',Arial,sans-serif;
  margin:0;
  color:#e5e8ef;
}

.container {
  display:flex;
  align-items:flex-start;
  min-height:100vh;
  padding:20px 0;
}

/* ====================================================== */
/* =================  LINKES FORM-PANEL  ================ */
/* ====================================================== */
.compact-panel {
  background:#232a3b;
  border-radius:18px;
  box-shadow:0 4px 18px #0004;
  max-width:420px;
  min-width:340px;
  width:100%;
  margin:0 10px 0 18px;
  padding:25px 14px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.logo {
  display:block;
  margin:0 auto 7px;
  max-width:120px;
}

.headline {
  color:#7d82fa;
  font-size:1.4rem;
  margin:0 0 13px;
  font-weight:700;
  letter-spacing:1px;
  text-align:center;
}

/* ---------- Formularfelder ---------- */
.form-group,.form-row {
  display:flex;
  flex-direction:column;
  margin-bottom:8px;
  gap:2px;
}

.form-row {
  flex-direction:row;
  gap:10px;
}

input,select,textarea {
  background:#222736;
  color:#e5e8ef;
  border:1px solid #444a63;
  border-radius:6px;
  padding:10px 13px;
  font-size:15px;
  font-family:inherit;
  outline:none;
  resize:vertical;
}

/* Auto-Grow Basis: keine Scrollbar bis zur Maxhöhe */
.form-group textarea {
  overflow-y: hidden;   /* Scrollbar erst zeigen, wenn Max erreicht */
  line-height: 1.4;     /* stabile Berechnungsgrundlage für die Höhe */
  min-height: 1.4em;     /* angenehme Anfangshöhe (ca. 2 Zeilen) */
}

input:focus,select:focus,textarea:focus {
  border:1.5px solid #9ea7f7;
}

input::placeholder,textarea::placeholder {
  color:#8e96b8;
  font-size:12px;
}

/* ---------- Primärer Button ---------- */
.btn-primary {
  width: 100%;
  background:#5a5ef7;
  color:#fff;
  border:0;
  border-radius:10px;
  padding:15px;
  font-size:1.18rem;
  font-weight:600;
  cursor:pointer;
  margin-top:12px;
  box-shadow:0 3px 18px #0002;
  transition:background .13s;
}

.btn-primary:hover {
  background:#7077fa;
}

/* ---------- Slider / Toggles ---------- */
.tonality-container {
  margin:10px 0;
}

.tonality-label { 
  font-size:15px;
  color:#bbc1f4;
  text-align:center;
  margin-top: 15px;
}

.tonality-value {
  font-size:12px;
  color:#bbc1f4;
  text-align:center;
}

/* ----- Tonalitäts-Slider ----- */
.tonality-slider {
  width:100%;
  display:block;
  height:4px;
  accent-color:#7d82fa;
  box-sizing:border-box;
  margin:6px 0 0;
}

.toggles-row {
  display:flex;
  flex-direction:row;
  gap:30px;
  justify-content:center;
  align-items:center;
  margin:18px 0 20px;
}

.toggle-combo {
  display:flex;
  align-items:center;
  gap:7px;
}

.toggle-label {
  font-size:15px;
  color:#bbc1f4;
}

.switch {
  position:relative;
  display:inline-block;
  width:34px;
  height:18px;
}

.switch input {
  display:none;
}

.slider {
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:#3c4157;
  border-radius:16px;
  transition:.3s;
}

.slider:before {
  content:"";
  position:absolute;
  height:13px;
  width:13px;
  left:3px;
  bottom:2.5px;
  background:#e5e8ef;
  border-radius:50%;
  transition:.3s;
}

input:checked + .slider {
  background:#7d82fa;
}

input:checked + .slider:before {
  transform:translateX(15px);
  background:#fff;
}
/* ====================================================== */
/* =================  RECHTES OUTPUT-PANEL  ============= */
/* ====================================================== */
.output-panel {
  flex:1 1 0;
  margin-top:0px;
  margin-left:10px;
  margin-right:20px;
  background:#232a3b;
  border-radius:18px;
  min-height:50vh;
  padding:20px 26px;
  display:flex;
  flex-direction:column;
}

.expo-list {
  list-style:none;
  padding-left:0;
  margin:0;
  display:flex;
  flex-direction:column;
  gap:13px;
}

.expo-placeholder {
  color:#7780a4;
  font-style:italic;
}

.btn-icon:hover {
  background:#353b58;
  color:#fff;
}

.btn-delete:hover {
  background:#2e232a;
}

.btn-expand:hover {
  color:#bbc1f4;
}

.btn-save-inline:hover {
  color:#bbc1f4;
}

.btn-generate-text:hover {
  background:#5a5ef7;
}

/* ——— Experten-Auswahl ——— */
.expert-box {
  margin-top:18px;
}

.expert-box summary {
  cursor:pointer;
  font-weight:600;
  list-style:none;
  outline:none;
  position:relative;
  padding:6px 0;
}

.expert-box summary::after {
  content:"▼";
  position:absolute;
  right:0;
}

.expert-box[open] summary::after {
  content:"▲";
}

/* ——— Experten-Feld: Text | Select | Button ——— */
.expert-fields label {
  display:flex;
  align-items:center;
  gap:8px;
  margin:6px 0 10px;
  font-size:.9em;
}

.expert-fields select {
  flex:1 1 auto;
}

.info-btn {
  margin-left:0;
}

/* ——— Info-Button ——— */
.info-btn {
  background:none;
  border:none;
  cursor:pointer;
  color:#bbb;
  font-size:.9em;
  margin-left:6px;
  padding:0;
}

.info-btn:hover {
  color:#fff;
}

/* ——— Modal ——— */
.modal {
  display:none;
  position:fixed;
  z-index:2000;
  inset:0;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(2px);
}

.modal-content {
  background:#1b1e2b;
  color:#eee;
  padding:24px;
  border-radius:8px;
  max-width:420px;
  margin:10% auto;
  box-shadow:0 6px 18px rgba(0,0,0,.4);
  font-size:.95em;
  line-height:1.5;
}

.modal .close {
  float:right;
  font-size:1.4em;
  cursor:pointer;
  margin-top:-8px;
}

/* Konsistente Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  padding: .5rem .9rem;
  border-radius: .6rem;
  font: 600 0.95rem/1.1 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  border: 1px solid rgba(255,255,255,.08);
  cursor: pointer;
  transition: transform .02s ease, background .15s ease, border-color .15s ease;
  user-select: none;
}

.btn:active {
  transform: translateY(1px);
}

.btn-primary {
  background: #6b74ff;
  color: #fff;
  border-color: #6b74ff;
}

.btn-primary:hover {
  filter: brightness(1.05);
}

.btn-secondary {
  background: rgba(255,255,255,.05);
  color: #fff;
}

.btn-secondary:hover {
  background: rgba(255,255,255,.08);
}

.btn-ghost:hover {
  background: rgba(255,255,255,.06);
}

#exportBtn, #exportXmlBtn {
  display: inline-flex;
  width: auto !important;
  min-width: 0;
}

/* ====================================================== */
/* ==================  EXPO-ACCORDION  ================== */
/* ====================================================== */

.expo-akkordeon{
  background:#1f2635;
  border:1px solid #3a415a;
  border-radius:12px;
  overflow:hidden;
}

.expo-akk-header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 14px;
  background:#262d40;
  border-bottom:1px solid #3a415a;
}

.expo-akk-index{
  color:#9aa3c7;
  min-width:24px;
  text-align:right;
}

.expo-akk-titel{
  flex:1 1 auto;
  font-weight:600;
  color:#e6e9f3;
  line-height:1.3;
}
.expo-titel-text{ display:inline; }

.btn-icon{
  border:none;
  background:transparent;
  color:#c7cce6;
  cursor:pointer;
  padding:6px 8px;
  border-radius:8px;
}
.btn-icon:hover{ background:#353b58; color:#fff; }

.btn-edit-title{}
.btn-delete{ color:#f0b7c4; }
.btn-delete:hover{ background:#402b35; color:#fff; }

.btn-expand{
  border:none;
  background:transparent;
  color:#c7cce6;
  cursor:pointer;
  padding:4px 6px;
  border-radius:6px;
  font-weight:700;
}

/* --- Body standardmäßig einklappen --- */
.expo-akk-body{
  max-height:0;
  overflow:hidden;
  padding:0 14px;
  opacity:0;
  transition:max-height .25s ease, padding .25s ease, opacity .2s ease;
  background:#232a3b;
}

/* --- Bei .open ausklappen --- */
.expo-akkordeon.open .expo-akk-body{
  max-height:4000px;            /* groß genug für typische Inhalte */
  padding:12px 14px 16px;
  opacity:1;
}

/* Inhalt im Body */
.text-preview{
  margin-top:12px;
  padding:12px;
  border:1px solid #3a415a;
  border-radius:10px;
  background:#1b2030;
  color:#e8ebf5;
  min-height:42px;
}

/* Button im Body (Text generieren) */
.btn-generate-text{
  align-self:flex-start;
  margin-top:6px;
  margin-bottom: 12px;
}
.btn-generate-text:hover{ filter:brightness(1.05); }

/* Lade-Animation im Preview-Bereich */
.text-preview.loading {
  position: relative;
  min-height: 42px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 10px;
  color: #9aa3c7;
  font-style: italic;
}

/* kleines rotierendes Symbol */
.text-preview.loading::before {
  content: "⏳";
  display: inline-block;
  animation: spin 1.2s linear infinite;
}

/* Abstand unterhalb der Vorschau zum Bearbeiten-Button */
.expo-akk-body .edit-btn {
  margin-top: 10px;
}

/* Badge + visueller Hinweis für Titel mit vorhandenen Texten */
.expo-akkordeon.has-text .expo-akk-header {
  border-left: 3px solid #6b74ff;        /* subtiler Akzent */
  padding-left: 10px;
}

.text-badge {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  margin: 0 8px 0 6px;
  padding: 2px 8px;
  border-radius: 999px;
  font: 600 12px/1 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: rgba(107, 116, 255, .12);
  color: #c9ccff;
  border: 1px solid rgba(107, 116, 255, .35);
  vertical-align: middle;
}

.expo-akk-body .btn-generate-text {
  width: auto;
  min-width: 160px; /* oder was dir optisch passt */
}

/* Cancel-Button */
.btn-cancel-text { display:inline-flex; }

/* Loading (zu startLoading/stopLoading) */
.text-loading{ display:flex; gap:12px; color:#9aa3c7; align-items:flex-start; }
.text-loading .loader{
  width:18px;height:18px;border:3px solid #7d82fa;border-top-color:transparent;border-radius:50%;
  animation:spin .9s linear infinite;margin-top:2px;
}

.text-cancelled {
  color: #f0c36d;
  font-style: italic;
}
.text-error {
  color: #f29aa3;
}

.text-editarea { width: 100%; min-height: 220px; }
.edit-actions { display:flex; gap:8px; margin-top:8px; }

/* „Erneut generieren“ im Body leicht absetzen */
.expo-akk-body .btn-regenerate-text {
  margin-top: 8px;
}
.edit-actions .btn-primary {
  width: auto;
  min-width: 140px;   /* optional: Mindestbreite */
  padding: 10px 20px; /* angenehme Größe */
}

#exportXmlBtn, #exportCsvBtn {
  display: inline-flex;
  width: auto !important;
  min-width: 0;
}

/* Row mit Vorgaben-Textarea + Button */
.generate-row {
  display: flex;
  gap: 8px;
  align-items: flex-start;
  margin-top: 8px;
}

.briefing-input {
  flex: 1;
  min-height: 72px;
  resize: vertical;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 10px;
  background: rgba(0,0,0,0.2);
  color: #fff;
  font: 14px/1.4 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

.generate-row .btn-generate-text {
  align-self: flex-start; /* Button bleibt oben ausgerichtet */
}

/* === 1) Mehr Abstand zwischen Slidern === */
.tonality-container,
.detail-container,
.style-container {
  margin-bottom: 16px; /* nach Bedarf 20–24px */
}

/* === 2) Layout für Vorgaben+Buttons+Preview === */
.generate-row {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  flex-wrap: wrap;              /* erlaubt Umbruch */
  margin-top: 8px;
}

/* Textarea nimmt Platz, bleibt aber neben den Buttons */
.generate-row .briefing-input {
  flex: 1 1 480px;              /* wächst, min. ca. 480px */
  min-height: 24px;
}

/* Buttons nur so breit wie nötig */
.generate-row .btn-generate-text,
.generate-row .btn-cancel,
.generate-row .btn-cancel-text {
  flex: 0 0 auto;
  white-space: nowrap;
}

/* WICHTIG: Text-Ausgabe (Preview/Editor) immer darunter */
.generate-row .text-preview,
.generate-row .editor-box,
.generate-row .editor-container,
.generate-row .text-output {
  flex: 1 1 100%;
  order: 5;                     /* nach Textarea/Buttons */
  margin-top: 10px;
  width: 100%;
  display: block;               /* falls irgendwas es inline/flex macht */
}

/* Optional: Status-Badge bleibt in der Zeile ausgerichtet */
.generate-row .status-badge {
  align-self: center;
}

/* Mobile: Textarea in eigene Zeile, Buttons darunter */
@media (max-width: 900px) {
  .generate-row .briefing-input {
    flex-basis: 100%;
    min-width: 0;
  }
}
/* --- Segmented Controls --- */
.seg {
  display: flex;
  flex-direction: column;
  align-items: center;   /* alles mittig */
  text-align: center;    /* Label-Text mittig */
}
.segrow {
  display: flex;
  justify-content: center;
  gap: 16px;
  flex-wrap: wrap;
  align-items: center;
}
.seg .toggle-label {
  display: block;
  opacity: 0.85;
  margin-bottom: 6px;
  text-align: center;
}
.segmented {
  display: inline-flex;
  border: 1px solid #444a63;
  border-radius: 8px;
  overflow: hidden;
  background: #1b2130;
}
.segmented input {
  display: none; /* wir stylen die Labels als Buttons */
}
.segmented label {
  padding: 6px 12px;
  font-size: 14px;
  cursor: pointer;
  border-right: 1px solid #444a63;
  user-select: none;
}
.segmented label:last-of-type {
  border-right: none;
}
.segmented input:checked + label {
  background: #39415a;
}
.segmented input:focus + label {
  outline: 2px solid #6aa0ff;
  outline-offset: -2px; /* bleibt im Segment */
}
